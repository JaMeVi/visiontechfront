<google-map
  [center]="center"
  [zoom]="zoom"
  height="500px"
  width="100%"
  (mapClick)="onMapClick($event)"
>
  <!-- Marcador temporal para la nueva ruta -->
  <map-marker
    *ngIf="nuevaPosicion"
    [position]="nuevaPosicion"
    label="Nuevo"
  ></map-marker>

  <!-- Marcadores de rutas existentes -->
  <map-marker
    *ngFor="let m of marcadores"
    [position]="{ lat: m.lat, lng: m.lng }"
    [label]="m.label || ''"
    (mapClick)="openInfo(m, marker)"
    #marker
  ></map-marker>

  <map-info-window #infoWindow>{{ selectedInfo }}</map-info-window>
</google-map>

<!-- Formulario para registrar nueva ruta -->
<div *ngIf="nuevaPosicion" class="form-panel">
  <h3>Registrar Nueva Ruta</h3>
  <form (ngSubmit)="registrarRuta()">
    <input type="text" [(ngModel)]="nuevaRuta.nombreRuta" name="nombreRuta" placeholder="Nombre" required />
    <input type="text" [(ngModel)]="nuevaRuta.inicio" name="inicio" placeholder="Inicio" required />
    <input type="text" [(ngModel)]="nuevaRuta.destino" name="destino" placeholder="Destino" required />
    <input type="number" [(ngModel)]="nuevaRuta.distanciaMetros" name="distanciaMetros" placeholder="Distancia (m)" required />
    <input type="number" [(ngModel)]="nuevaRuta.tiempoRuta" name="tiempoRuta" placeholder="Tiempo (min)" required />
    <button type="submit">Registrar</button>
  </form>
</div>
